# Docusaurus Migration Status

## Overview

This document tracks the current status of the Harper documentation migration from GitBook to Docusaurus.

## Current Status: Prototype Phase

### ‚úÖ Completed

1. **Docusaurus Site Setup**
   - Created `/site` directory with Docusaurus 3.6.4
   - Basic configuration with Harper metadata (title, tagline)
   - Updated footer with correct community links
   - Added local search plugin (not yet configured/tested)

2. **Conversion Scripts**
   - `sync-and-convert.sh` - Main sync script with options:
     - `-s` Sample mode (10 representative files)
     - `-d` Dry-run mode
     - `-b` Branch selection
   - `convert-gitbook-to-docusaurus.js` - Handles:
     - GitBook hints ‚Üí Docusaurus admonitions
     - GitBook tabs ‚Üí Docusaurus tabs (basic conversion)
     - README.md ‚Üí index.md
     - Title extraction from markdown headings
     - Link fixing (removes redundant paths and .md extensions from HTML)
     - Image path conversion
   - `preview-harperdb-docs.sh` - Preview from harperdb repo

3. **Architecture Decisions**
   - Two-repository approach maintained
   - Docusaurus site lives in documentation repo
   - Docs synced and converted to harperdb for Docusaurus compatibility
   - Images stay at root in documentation, nested under docs/ in harperdb
   - Environment variables enable flexible preview

4. **Sidebar Configuration**
   - Fully autogenerated sidebar
   - Titles extracted from markdown content
   - Root index has sidebar_position: 0
   - Category files for directories without index

### üöß In Progress

YMMV

1. **Content Conversion**
   - Sample files tested successfully
   - Full conversion not yet run
   - Some GitBook features may need additional conversion logic

2. **Build and Deployment**
   - Local preview working
   - Production build configuration needed
   - CI/CD pipeline not yet configured

### ‚ùå Not Started

Evolving/fuzzy list of things to implement/build/do

1. **Branding and Styling**
   - Harper visual identity (colors, fonts, logo)
   - Custom CSS theme
   - Homepage design
   - Navigation styling

1. **Full Content Migration**
   - Complete sync of all documentation
   - Verification of all converted content
   - Link validation across all pages

1. **Advanced Features**
   - Versioning setup
   - Search configuration and testing
   - Analytics integration
   - Redirects from old URLs as needed. Goal is to maintain existing URL structure

1. **Deployment Infrastructure**
   - GitHub Actions workflow
   - Hosting configuration
   - CDN setup

## Known Issues

1. **GitBook Tabs** - Basic conversion implemented, may need enhancement for complex cases
1. **Generated Index Pages** - Some directories without index files show generated category pages
1. **Image Paths** - Currently using `/images/` prefix, may need adjustment for production

## Next Steps

1. Run full content sync and review all conversions
1. Test and refine GitBook feature conversions
1. Set up versioning strategy
1. Configure production build and deployment
1. Plan cutover from GitBook to Docusaurus

## Testing Instructions

### Prerequisites

- Both repositories must be on the `docs-in-hdb` branch
- Repositories must be in sibling directories:
  ```
  parent-directory/
  ‚îú‚îÄ‚îÄ documentation/  (on docs-in-hdb branch)
  ‚îî‚îÄ‚îÄ harperdb/      (on docs-in-hdb branch)
  ```

### Working with Docusaurus

The documentation repository contains GitBook-formatted docs that must be converted for Docusaurus.
You can work from either repository:

#### From harperdb directory:
```bash
# 1. Sync sample files for testing
npm run docs:sync:sample

# 2. Preview the converted docs
npm run docs:dev

# 3. Run full sync (when ready)
npm run docs:sync

# 4. Build for production (not tested)
npm run docs:build
```

#### From documentation directory:
```bash
# 1. Install dependencies (first time only)
npm run site:install

# 2. Sync sample files to harperdb
npm run sync:to-harperdb:sample ../harperdb

# 3. Preview the converted docs (from harperdb)
npm run site:dev
# Note: Shows warning that you're viewing harperdb/docs, not local GitBook docs

# 4. Or sync and preview in one command
npm run site:sync-and-dev
```

Both approaches preview the converted docs from harperdb/docs, not the GitBook source.
