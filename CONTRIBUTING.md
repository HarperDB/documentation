# Contributing

## Prerequisites

Before contributing, please ensure you have the following installed:

- Node.js (version 22)
- npm (version 10 - included with Node.js)

## Set Up

1. Install the dependencies:

```bash
npm install
```

2. Start the development server:

```bash
npm run dev
```

3. Make and test your changes
4. Format your code:

```bash
npm run format
```

5. Push changes to a branch and create a pull request

## Site Organization

This site is powered by Docusaurus and leverages the file-system based versioning capabilities of the framework.

There are two directories where actual documentation content lives.

The first, `docs/` contains the "latest" or "next" version of the documentation. We do not publish or render this directory, and the content here is meant to represent on-going development.

The second, `versioned_docs` contains all of the specific Harper version documentation organized by minor version. The latest version within this directory maps to the default path on the site. For example, if the latest version is `versioned_docs/version-4.6/` then the page https://docs.harperdb.io/docs/getting-started/first-harper-app maps to the file `site/versioned_docs/version-4.6/getting-started/first-harper-app.md`. And for the previous 4.5 version the page http://localhost:3000/docs/4.5/getting-started/first-harper-app can be found at `site/versioned_docs/version-4.5/getting-started/first-harper-app.md`.

Depending on the specific change, you may need to make updates to similar files across multiple version directories as well as the root `docs/`.

The site organization is ever evolving so make sure to revisit this file over time to stay up to date with the latest structure.

## Release Notes Process

When adding release notes for a new HarperDB version, follow these steps:

### 1. Create the Release Note File

Add a new markdown file in the appropriate version directory:

- Path: `release-notes/v4-tucker/{version}.md` (e.g., `4.7.1.md`)
- Include the standard frontmatter with title
- Add the date and version details
- List all changes, fixes, and improvements

Example structure:

```markdown
---
title: 4.7.1
---

# 4.7.1

MM/DD/YYYY

- Feature or fix description
- Another change description
```

For alpha/beta releases, include the appropriate warning admonition.

### 2. Update the Version Index (Minor Versions Only)

For new minor versions (e.g., 4.8.0), update the version index file at `release-notes/v4-tucker/index.mdx`:

- Add a new `<LatestPatchLink>` component section for the new minor version
- Include a summary of the major features introduced in that minor version line
- Place the newest minor version at the top of the file

**Note**: For patch releases (e.g., 4.7.1, 4.7.2), you do NOT need to update the index file. The `<LatestPatchLink>` component automatically finds and links to the latest patch version.

Example:

```mdx
## <LatestPatchLink major={4} minor={7} label="4.7" />

- Major feature summary for 4.7.x releases
- Another significant capability added
```

### 3. Automatic Updates

The following updates happen automatically through the system:

- **Sidebar Navigation**: The release notes sidebar uses `autogenerated` directives, so new release note files are automatically included
- **Latest Version Links**: The `<LatestPatchLink>` component automatically finds and links to the latest patch version for a given major.minor combination
- **Sorting**: Release notes are automatically sorted by semantic version in the sidebar

### 4. Considerations

- Release notes are separate from the main documentation versioning system
- All release notes live in the `release-notes/` directory, not in `versioned_docs/`
- The release notes plugin is configured in `docusaurus.config.ts` with its own routing and sidebar
- The main navigation links directly to v4 Tucker release notes as the default
